<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Agregar Pa√≠s</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>Agregar Nuevo Pa√≠s</h1>
  <div class="form-container">
    <form action="/paises" method="POST">

      <label for="imagen">URL de la Imagen</label>
      <input type="text" name="imagen" id="imagen" placeholder="https://ejemplo.com/pais.jpg" />

      <label for="nombre">Nombre</label>
      <input type="text" id="nombre" name="nombre" placeholder="(ej: Argentina)" required />

      <label for="nombreOficial">Nombre Oficial</label>
      <input type="text" id="nombreOficial" name="nombreOficial" placeholder="(ej: Rep√∫blica Argentina)" required />

      <label for="capital">Capital</label>
      <input type="text" id="capital" name="capital" required />

      <label for="idioma">Idioma</label>
      <input type="text" id="idioma" name="idioma" placeholder="(ej: Espa√±ol, Ingl√©s)" required />

      <label for="borders">Pa√≠ses lim√≠trofes (separados por coma)</label>
      <textarea id="borders" name="borders" rows="2"></textarea>

      <label for="area">√Årea (km¬≤)</label>
      <input type="number" id="area" name="area" placeholder="sin puntos" required />

      <label for="population">Poblaci√≥n</label>
      <input type="number" id="population" name="population" placeholder="sin puntos" required />

      <label for="codigoISO">C√≥digo ISO (ej: ARG, BRA, USA)</label>
      <input type="text" id="codigoISO" name="codigoISO" placeholder="Ingrese el c√≥digo ISO del pa√≠s" required maxlength="3" style="text-transform:uppercase;" />

      <label for="timezones">Zona horaria</label>
      <select id="timezones" name="timezones" required>
        <option value="">Cargando zonas horarias...</option>
      </select>
      
      <script>
    async function cargarZonasHorarias() {
      try {
        const res = await fetch("/api/timezones"); // üëà tu ruta Express
        if (!res.ok) throw new Error("Error HTTP " + res.status);
        const zonas = await res.json();

        const select = document.getElementById("timezones");
        select.innerHTML = ""; // limpio el "cargando"

        if (zonas.length === 0) {
          select.innerHTML = '<option value="">No disponible</option>';
          return;
        }

        zonas.forEach(z => {
          const opt = document.createElement("option");
          opt.value = z;
          opt.textContent = z;
          select.appendChild(opt);
        });
      } catch (error) {
        console.error("‚ùå Error cargando zonas horarias:", error.message);
        const select = document.getElementById("timezones");
        select.innerHTML = '<option value="">No disponible</option>';
      }
    }

    cargarZonasHorarias();
  </script>

      <!-- Creador oculto, siempre Virginia -->
      <input type="hidden" name="creador" value="VirginiaD." />

      <div class="card-buttons" style="text-align: center; margin-top: 20px;">
        <button type="submit" class="btn btn-primary">Guardar</button>
        <a href="/dashboard" class="btn btn-danger">Cancelar</a>
      </div>

    </form>
  </div>
</body>
</html>
